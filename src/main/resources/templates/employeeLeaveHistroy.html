<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>My Leave Requests</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
	rel="stylesheet">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
	rel="stylesheet">
<style>
/* Previous CSS remains the same */
.status-badge {
	padding: 0.5rem 1rem;
	border-radius: 8px;
	font-weight: 500;
	display: inline-flex;
	align-items: center;
	gap: 0.5rem;
	width: fit-content;
}
</style>
</head>
<body>
	<div class="container py-4">
		<!-- Profile Header -->
		<div class="profile-header">
			<div class="d-flex justify-content-between align-items-center">
				<div>
					<h2 class="mb-3">
						<i class="bi bi-person-circle me-2"></i>My Leave Requests
					</h2>
					<div class="d-flex gap-4">
						<div class="text-center">
							<div class="h4 mb-0">12</div>
							<small>Total Leaves</small>
						</div>
						<div class="text-center">
							<div class="h4 mb-0">8</div>
							<small>Leaves Remaining</small>
						</div>
					</div>
				</div>


				<a th:href="@{/employee-profile}" class="btn btn-light"
					role="button"> <i class="bi bi-arrow-left me-2"></i>Back to
					Dashboard
				</a> <a th:href="@{/leave}" class="btn btn-light" role="button"> <i
					class="bi bi-plus-circle me-2"></i>New Request
				</a>
			</div>
		</div>

		<!-- Leave Requests Card -->
		<div class="card leave-card">
			<div class="card-body p-4">
				<div class="table-responsive">
					<table class="table table-hover align-middle mb-0">
						<thead class="table-light">
							<tr>
								<th><i class="bi bi-bookmark-fill me-1"></i>Type</th>
								<th><i class="bi bi-calendar-event me-1"></i>From</th>
								<th><i class="bi bi-calendar-check me-1"></i>To</th>
								<th><i class="bi bi-chat-left-text me-1"></i>Reason</th>
								<th><i class="bi bi-info-circle me-1"></i>Status</th>
								<th><i class="bi bi-chat-dots me-1"></i>Admin Comment</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="leave : ${leaves}">
								<td data-label="Type"><i
									class="bi bi-bookmark-fill text-primary me-2"></i> <span
									th:text="${leave.leaveType}"></span></td>
								<td data-label="From"><span
									th:text="${leave.startDate != null ? #dates.format(leave.startDate, 'dd MMM yyyy') : 'N/A'}"></span>
								</td>
								<td data-label="To"><span
									th:text="${leave.endDate != null ? #dates.format(leave.endDate, 'dd MMM yyyy') : 'N/A'}"></span>
								</td>
								<td data-label="Reason" class="reason-cell">

									<div class="reason-tooltip">
										<span th:text="${leave.reason}"></span>
									</div>
								</td>
								<td data-label="Status"><span
									th:switch="${leave.status.name()}" class="status-badge">
										<!-- Changed to use enum name --> <span th:case="APPROVED"
										class="bg-success text-white"> <i
											class="bi bi-check-circle"></i> Approved
									</span> <span th:case="REJECTED" class="bg-danger text-white">
											<i class="bi bi-x-circle"></i> Rejected
									</span> <span th:case="PENDING" class="bg-warning text-dark"> <i
											class="bi bi-hourglass-split"></i> Pending
									</span> <span th:case="*" class="bg-secondary text-white"> <i
											class="bi bi-question-circle"></i> <span
											th:text="${leave.status != null ? leave.status : 'Unknown'}"></span>
									</span>
								</span></td>
								<td data-label="Admin Comment">
									<div class="text-muted" style="max-width: 200px;">
										<i class="bi bi-chat-quote text-secondary me-2"></i> <span
											th:text="${leave.adminComment ?: 'No comments yet'}"></span>
									</div>
								</td>
							</tr>

							<!-- Empty State -->
							<tr th:if="${leaves.empty}">
								<td colspan="6" class="text-center py-5">
									<div class="text-muted">
										<i class="bi bi-inbox display-4"></i>
										<h4 class="mt-3">No Leave Requests Found</h4>
										<p class="mb-0">Start by creating a new leave request</p>
									</div>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>

	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>